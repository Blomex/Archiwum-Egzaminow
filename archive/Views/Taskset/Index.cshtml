@model archive.Models.Taskset.IndexViewModel
@using System.Web

<h1>@Model.Course.Name</h1>
<a asp-controller="Taskset" asp-action="Create"
   asp-route-forCourseId="@Model.Course.Id">Dodaj egzamin</a>
<hr/>

<h2>Lista egzamin√≥w:</h2>
@{
    int lastYear = 0;
    string courseShortcutEncoded = 
        Model.Course.ShortcutCode != null ? HttpUtility.UrlEncode(Model.Course.ShortcutCode) : null;
}
@foreach (var taskset in Model.Tasksets)
{
    if (lastYear != taskset.Year) {
        if(lastYear != 0)
        {
            @:</ul>
        }
        <h3>
            @taskset.Year
        </h3>
        @:<ul>
        lastYear = taskset.Year;
    }

    <li>
        @if (courseShortcutEncoded == null || taskset.ShortcutCode == null)
        {
            <a asp-controller="Taskset" asp-action="ShowTaskset" asp-route-id="@taskset.Id">
                @taskset.Name
            </a>
        }
        else
        {
            <a href="/s/@courseShortcutEncoded/@HttpUtility.UrlEncode(taskset.ShortcutCode)">@taskset.Name</a>
        }
    </li>

}
@if (lastYear != 0)
{
    @:</ul>
}
